<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Checker</title>
    <style>
        /* Basic Reset and Body Styling */
        body {
            font-family: -apple-system, BlinkMacMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f7f6;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            box-sizing: border-box;
        }

        /* Container for Input and Suggestions */
        .input-container {
            width: 100%;
            max-width: 500px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            position: relative; /* Needed for absolute positioning of suggestions */
            display: flex; /* Use flex to arrange elements vertically */
            flex-direction: column;
        }

        /* Styling for the added heading */
        .input-container h2 {
            margin-top: 0;
            margin-bottom: 15px; /* Add some space below the heading */
            color: #333;
            text-align: center; /* Center the heading */
        }


        /* Input and Button Styling */
        .input-group {
            display: flex;
            gap: 10px; /* Space between input and button */
            margin-bottom: 10px;
        }

        #searchInput {
            flex-grow: 1; /* Allows input to take available space */
            padding: 12px 15px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            outline: none;
            transition: border-color 0.3s ease, box-shadow 0.3s ease; /* Add box-shadow transition */
        }

        #searchInput:focus {
            border-color: #007bff; /* Highlight on focus */
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.2);
        }

        /* Style for when items are found */
        #searchInput.found-border {
            border-color: #28a745; /* Green border */
            box-shadow: 0 0 8px rgba(40, 167, 69, 0.4); /* Green glow */
        }


        #clearButton {
            padding: 12px 20px;
            font-size: 16px;
            background-color: #dc3545; /* Red color for clear */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            outline: none;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Add shadow to button */
        }

        #clearButton:hover {
            background-color: #c82333;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3); /* Enhance shadow on hover */
        }

        /* Status and Count Messages */
        .message {
            font-size: 14px;
            margin-bottom: 5px;
            padding: 0 10px; /* Add some horizontal padding */
            display: none; /* Hide by default */
        }

        #statusMessage {
            color: #28a745; /* Green color for "Found!" */
            font-weight: bold;
        }

        #countMessage {
            color: #555;
        }

        /* Suggestions List Styling */
        #suggestions {
            list-style: none;
            padding: 0;
            margin-top: 5px; /* Space below count message */
            /* No absolute positioning needed here as it's part of flex container */
            /* Instead, manage its display property */
            border: 1px solid #ccc;
            border-radius: 4px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            max-height: 200px; /* Limit height and add scrolling */
            overflow-y: auto;
            z-index: 1000; /* Ensure it's above other content if needed */
            display: none; /* Hide by default */
        }

        #suggestions li {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s ease;
        }

        #suggestions li:last-child {
            border-bottom: none;
        }

        #suggestions li:hover {
            background-color: #f8f9fa;
        }

        /* Show suggestions list when there are items */
        /* This relies on JS managing the display property directly */


        /* Responsive Adjustments */
        @media (max-width: 600px) {
            .input-container {
                padding: 15px;
            }

            .input-group {
                flex-direction: column; /* Stack input and button on small screens */
                gap: 10px;
            }

            #clearButton {
                width: 100%; /* Full width button */
            }
        }
    </style>


</head>
<body>

    <div class="input-container">
        <h2>Device Checker</h2> <div class="input-group">
            <input type="text" id="searchInput" placeholder="Enter text...">
            <button id="clearButton">Clear</button>
        </div>
        <p id="statusMessage" class="message"></p>
        <p id="countMessage" class="message"></p>
        <ul id="suggestions">
            </ul>
    </div>

    <script>
        const searchInput = document.getElementById('searchInput');
        const suggestionsList = document.getElementById('suggestions');
        const clearButton = document.getElementById('clearButton');
        const statusMessage = document.getElementById('statusMessage');
        const countMessage = document.getElementById('countMessage');


        // --- Your Data List ---
        // IMPORTANT: Replace this with your actual 50000+ entries.
        // Each entry should be a string, preferably 12 characters long as specified.
        // Example data below is for demonstration.
        const data = [
            "AQW SED CFR TGF HYU JKI",
            "ZXC VBN MJU KLO PGT RFS",
            "123 456 789 0AB CDE FGH",
            "QWE RTY UIO PAS DFG HJK",

        ];

        // --- Helper Function to Format Input Display ---
        // Removes existing spaces, then adds spaces every 3 characters.
        // This is for the visual display in the input field.
        function formatInputDisplay(value) {
            if (!value) return "";
            // Remove all existing spaces
            const cleanedValue = value.replace(/\s/g, '');
            let formattedValue = '';
            for (let i = 0; i < cleanedValue.length; i++) {
                formattedValue += cleanedValue[i];
                if ((i + 1) % 3 === 0 && i !== cleanedValue.length - 1) {
                    formattedValue += ' ';
                }
            }
            return formattedValue;
        }

        // --- Function to Filter Data ---
        function filterData(query) {
            // Remove spaces from the query for matching against raw data items
            const cleanedQuery = query.replace(/\s/g, '').toLowerCase();

            if (!cleanedQuery) return []; // Return empty if query is empty after cleaning

            // Filter data based on the cleaned, lowercase query
            // This iterates through the whole data list on each input.
            // For 50000 items, this might be slow on older devices or very fast typing.
            // More performant solutions for very large datasets involve indexing (e.g., Trie).
            return data.filter(item => item.replace(/\s/g, '').toLowerCase().includes(cleanedQuery));
        }

        // --- Function to Display Suggestions ---
        function displaySuggestions(suggestions) {
            // Clear previous suggestions
            suggestionsList.innerHTML = '';

            // Update count message
            if (suggestions.length > 0) {
                countMessage.textContent = `Total found: ${suggestions.length}`;
                countMessage.style.display = 'block';
                suggestionsList.style.display = 'block'; // Show list container
            } else {
                countMessage.textContent = '';
                countMessage.style.display = 'none';
                 suggestionsList.style.display = 'none'; // Hide list container
            }

            // Display suggestions with numbering
            suggestions.forEach((suggestion, index) => {
                const li = document.createElement('li');
                // Add numbering (index starts at 0, so add 1)
                li.textContent = `${index + 1}. ${suggestion}`;
                li.addEventListener('click', () => {
                    // When a suggestion is clicked, set the input value
                    // Use the original suggestion text, then apply formatting for display
                    // Important: Use the *original* suggestion text without numbering or spaces added by displaySuggestions
                    // We need the raw data item clicked. Finding it by text content might be fragile.
                    // A better approach is to store the original value as a data attribute or closure.
                    // For simplicity here, we'll assume the clicked text content *without number* corresponds to a raw data item.
                    // A more robust way would be to pass the actual `suggestion` string to the handler.
                    const clickedText = suggestion; // Use the suggestion string passed to the loop
                    searchInput.value = formatInputDisplay(clickedText);

                    // Clear suggestions and messages after selection
                    suggestionsList.innerHTML = '';
                    suggestionsList.style.display = 'none';
                    statusMessage.textContent = '';
                    statusMessage.style.display = 'none';
                    countMessage.textContent = '';
                    countMessage.style.display = 'none';

                    // Remove the green border/glow
                    searchInput.classList.remove('found-border');

                    // Optional: Move focus back to input
                    searchInput.focus();
                });
                suggestionsList.appendChild(li);
            });
        }

        // --- Event Listener for Input ---
        searchInput.addEventListener('input', (event) => {
            const currentValue = event.target.value;

            // Store cursor position before updating value
            const cursorPosition = searchInput.selectionStart;

            // Format the current value for display (this will add spaces back)
            const formattedValue = formatInputDisplay(currentValue);

            // Update the input field's value with the formatted string
            // This *will* reset the cursor position to the end
            searchInput.value = formattedValue;

             // --- Attempt to restore cursor position ---
             // Calculate new cursor position based on added spaces
             let newCursorPosition = cursorPosition;
             // Count spaces in the formatted string UP TO the original cursor position
             let spacesAddedBeforeCursor = (formattedValue.substring(0, cursorPosition + (formattedValue.substring(0, cursorPosition).match(/\s/g) || []).length).match(/\s/g) || []).length;

              newCursorPosition += spacesAddedBeforeCursor;

             // Ensure cursor position doesn't exceed the string length
             newCursorPosition = Math.min(newCursorPosition, formattedValue.length);


             // Set the cursor position after the value has been updated
             requestAnimationFrame(() => {
                 searchInput.selectionStart = newCursorPosition;
                 searchInput.selectionEnd = newCursorPosition;
              });

            // Filter data based on the *raw* value (without display spaces)
            const rawValueForFiltering = currentValue.replace(/\s/g, '');
            const suggestions = filterData(rawValueForFiltering);

            // Display filtered suggestions
            displaySuggestions(suggestions);

            // Update status message and input border based on results
            if (suggestions.length > 0) {
                statusMessage.textContent = 'Found!';
                statusMessage.style.display = 'block';
                searchInput.classList.add('found-border'); // Add green border/glow
            } else {
                statusMessage.textContent = '';
                statusMessage.style.display = 'none';
                searchInput.classList.remove('found-border'); // Remove green border/glow
            }
        });


        // --- Event Listener for Clear Button ---
        clearButton.addEventListener('click', () => {
            searchInput.value = ''; // Clear the input field
            suggestionsList.innerHTML = ''; // Clear suggestions
            suggestionsList.style.display = 'none'; // Hide suggestions list
            statusMessage.textContent = ''; // Clear status message
            statusMessage.style.display = 'none';
            countMessage.textContent = ''; // Clear count message
            countMessage.style.display = 'none';
            searchInput.classList.remove('found-border'); // Remove green border/glow
            searchInput.focus(); // Put focus back on the input
        });

        // --- Hide suggestions when clicking outside ---
        document.addEventListener('click', (event) => {
            // Check if the click was outside the input container
            const inputContainer = searchInput.closest('.input-container');
            if (inputContainer && !inputContainer.contains(event.target)) {
                 suggestionsList.style.display = 'none';
                 // Optional: Hide status and count too when clicking away
                 // statusMessage.style.display = 'none';
                 // countMessage.style.display = 'none';
            }
        });

        // Optional: Hide suggestions when pressing Escape key
        searchInput.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                 suggestionsList.style.display = 'none';
                 // Optional: Hide status and count too
                 // statusMessage.style.display = 'none';
                 // countMessage.style.display = 'none';
            }
             // Prevent the default behavior if escape key is pressed
             if (suggestionsList.style.display === 'block' && event.key === 'Escape') {
                 event.preventDefault();
             }
        });

        // Initial state: hide suggestions list, status, and count
        suggestionsList.style.display = 'none';
        statusMessage.style.display = 'none';
        countMessage.style.display = 'none';

    </script>

</body>
</html>


